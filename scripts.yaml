fan_off:
  alias: Lights Off
  sequence:
  - parallel:
    - service: light.turn_on
      data:
        rgbw_color:
        - 0
        - 125
        - 255
        - 0
        brightness: 2
      target:
        entity_id: light.glide
    - service: homeassistant.turn_off
      data: {}
      target:
        entity_id:
        - light.fan_lights
        - input_boolean.bedmotion
        - switch.katchy
    - data: {}
      service: homeassistant.turn_on
      target:
        entity_id:
        - input_boolean.govee_cyan
        - light.shapes_007f
        - light.shapes_ee82
    - data:
        brightness: 255
        effect: Color Loop
        color_name: cyan
      service: light.turn_on
      target:
        entity_id:
        - light.bed_lights
        - light.desk_lights
        - light.light_switch
        - light.light_switch_corner
        - light.closet_lights
  mode: single
  icon: mdi:ceiling-light
color_loop:
  alias: Color
  sequence:
  - parallel:
    - choose:
      - conditions:
        - condition: state
          entity_id: input_boolean.govee_cyan
          state: 'on'
        sequence:
        - service: input_button.press
          data: {}
          target:
            entity_id: input_button.activategoveerainbow
        - service: input_boolean.turn_off
          target:
            entity_id: input_boolean.govee_cyan
          data: {}
      default:
      - service: light.turn_on
        target:
          entity_id:
          - light.glide
        data: {}
    - service: homeassistant.turn_on
      data: {}
      target:
        entity_id:
        - light.shapes_007f
        - light.shapes_ee82
    - data:
        brightness: 255
        effect: Color Loop
        rgbw_color:
        - 0
        - 255
        - 255
        - 0
      service: light.turn_on
      target:
        entity_id:
        - light.bedroom_lights
        - light.closet_lights
  mode: single
  icon: mdi:lightbulb-on
music:
  alias: Music
  sequence:
  - parallel:
    - service: input_button.press
      data: {}
      target:
        entity_id: input_button.activategoveemusic
    - service: light.turn_on
      target:
        entity_id: light.desk_lights
      data:
        brightness_pct: 90
    - service: light.turn_on
      data:
        effect: Music
      target:
        entity_id:
        - light.bedroom_lights
        - light.closet_lights
    - service: light.turn_on
      data: {}
      target:
        entity_id:
        - light.shapes_007f
        - light.shapes_ee82
  mode: single
  icon: mdi:party-popper
call:
  alias: Call
  sequence:
  - service: input_boolean.turn_on
    target:
      entity_id:
      - input_boolean.govee_cyan
    data: {}
  - parallel:
    - service: light.turn_on
      target:
        entity_id:
        - light.bed_lights
      data:
        effect: None
        rgb_color:
        - 0
        - 255
        - 255
        brightness_pct: 100
    - service: light.turn_on
      target:
        entity_id:
        - light.light_switch
        - light.light_switch_corner
      data:
        effect: None
        rgb_color:
        - 0
        - 255
        - 255
        brightness_pct: 50
    - service: input_boolean.turn_off
      data: {}
      target:
        entity_id: input_boolean.bedmotion
    - service: switch.turn_off
      data: {}
      target:
        entity_id:
        - switch.desktop
        - switch.usb_hub
    - service: light.turn_off
      data: {}
      target:
        entity_id:
        - light.fan_lights
        - light.closet_lights
        - light.desk_lights
    - service: light.turn_on
      data:
        rgbw_color:
        - 0
        - 125
        - 255
        - 0
        brightness: 2
      target:
        entity_id: light.glide
  mode: single
  icon: mdi:phone
night:
  sequence:
  - parallel:
    - service: input_button.press
      data: {}
      target:
        entity_id: input_button.activategoveeoff
    - service: light.turn_off
      data: {}
      target:
        entity_id:
        - light.shapes_007f
        - light.bedroom_lights
        - light.closet_lights
        - light.glide
        - light.shapes_ee82
    - service: cover.close_cover
      data: {}
      target:
        entity_id: cover.bedroom_blinds
    - service: switch.turn_off
      data: {}
      target:
        entity_id: switch.desktop
    - if:
      - condition: state
        state: 'on'
        entity_id: binary_sensor.bed_occupancy
      then:
      - service: switch.turn_off
        data: {}
        target:
          entity_id: switch.usb_hub
  alias: Night
  mode: single
  icon: mdi:weather-night
morning:
  alias: Morning
  sequence:
  - parallel:
    - choose:
      - conditions:
        - condition: state
          entity_id: input_boolean.govee_cyan
          state: 'on'
        sequence:
        - service: input_button.press
          data: {}
          target:
            entity_id: input_button.activategoveerainbow
        - service: input_boolean.turn_off
          target:
            entity_id: input_boolean.govee_cyan
          data: {}
      default:
      - service: light.turn_on
        target:
          entity_id:
          - light.glide
        data: {}
    - service: light.turn_on
      data:
        brightness_pct: 100
        hs_color:
        - 30.353
        - 33.597
      target:
        entity_id: light.fan_lights
    - data: {}
      service: homeassistant.turn_on
      target:
        entity_id:
        - light.shapes_007f
        - light.shapes_ee82
    - data:
        brightness: 255
        effect: Color Loop
        color_name: cyan
      service: light.turn_on
      target:
        entity_id:
        - light.bed_lights
        - light.desk_lights
        - light.light_switch
        - light.light_switch_corner
        - light.closet_lights
    - service: input_select.select_option
      data:
        option: Home
      target:
        entity_id: input_select.anthony
  mode: single
  icon: mdi:white-balance-sunny
start_car:
  alias: Start Car
  sequence:
  - if:
    - condition: state
      entity_id: binary_sensor.workday_sensor
      state: 'on'
    - condition: time
      before: '11:00:00'
      after: 07:00:00
      weekday:
      - mon
      - tue
      - wed
      - thu
      - fri
    - condition: state
      entity_id: person.anthony
      state: home
    then:
    - service: input_boolean.turn_on
      data: {}
      target:
        entity_id: input_boolean.ac_boost
  - if:
    - condition: not
      conditions:
      - condition: state
        entity_id: cover.garage_door
        state: open
    - condition: or
      conditions:
      - condition: state
        entity_id: person.anthony
        state: home
      - condition: state
        entity_id: input_select.anthony
        state: Home
      - condition: state
        entity_id: input_select.anthony
        state: Just Arrived
    then:
    - service: cover.open_cover
      data: {}
      target:
        entity_id: cover.garage_door
    - wait_for_trigger:
      - platform: state
        entity_id:
        - cover.garage_door
        to: opening
      continue_on_timeout: false
      timeout: 00:01:00
  - service: switch.turn_on
    data: {}
    target:
      entity_id: switch.accord_remotestart
  - delay:
      hours: 0
      minutes: 0
      seconds: 5
      milliseconds: 0
  - service: drone_mobile.refresh_device_status_accord
    data: {}
  - delay:
      hours: 0
      minutes: 0
      seconds: 10
      milliseconds: 0
  - if:
    - condition: not
      conditions:
      - condition: state
        entity_id: sensor.accord_ignitionstatus
        state: 'on'
    then:
    - service: switch.turn_on
      data: {}
      target:
        entity_id: switch.accord_remotestart
  - delay:
      hours: 0
      minutes: 0
      seconds: 5
      milliseconds: 0
  - service: drone_mobile.refresh_device_status_accord
    data: {}
  - wait_for_trigger:
    - platform: state
      entity_id:
      - sensor.accord_ignitionstatus
      to: 'on'
    timeout:
      hours: 0
      minutes: 0
      seconds: 10
      milliseconds: 0
  - if:
    - condition: not
      conditions:
      - condition: state
        entity_id: sensor.accord_ignitionstatus
        state: 'On'
    then:
    - service: notify.mobile_app_iphone
      data:
        message: Remote start failed
  mode: single
  icon: mdi:car
test:
  alias: Play Music
  sequence:
  - service: media_player.select_source
    data:
      source: Music (playlist)
    target:
      entity_id:
      - media_player.owntone_server
  - service: media_player.shuffle_set
    data:
      shuffle: true
    target:
      entity_id: media_player.owntone_server
  - service: media_player.media_next_track
    data: {}
    target:
      entity_id: media_player.owntone_server
  - parallel:
    - service: media_player.media_play
      data: {}
      target:
        entity_id: media_player.owntone_server
    - if:
      - condition: state
        entity_id: switch.lrtv
        state: 'off'
      then:
      - service: switch.turn_on
        data: {}
        target:
          entity_id: switch.lrtv
      - delay:
          hours: 0
          minutes: 0
          seconds: 40
          milliseconds: 0
      - service: media_player.volume_set
        data:
          volume_level: 0.5
        target:
          entity_id: media_player.living_room_denon
      - service: media_player.turn_on
        data: {}
        target:
          entity_id: media_player.owntone_output_tv
      - service: media_player.volume_set
        data:
          volume_level: 0.35
        target:
          entity_id: media_player.owntone_output_tv
      - service: media_player.turn_off
        data: {}
        target:
          entity_id: media_player.owntone_output_living_room
      - service: media_player.turn_on
        data: {}
        target:
          entity_id: media_player.owntone_output_living_room
      alias: Turn on Living Room TV
    - if:
      - condition: state
        entity_id: media_player.owntone_output_desk
        state: 'off'
      then:
      - service: media_player.turn_on
        data: {}
        target:
          entity_id: media_player.owntone_output_desk
      - service: media_player.volume_set
        data:
          volume_level: 0.15
        target:
          entity_id: media_player.owntone_output_desk
      - event: event_change_nanoleaf
        event_data: {}
      alias: Turn on Desk Speakers
    - if:
      - condition: state
        entity_id: media_player.owntone_output_bathroom
        state: 'off'
      then:
      - service: media_player.turn_on
        data: {}
        target:
          entity_id:
          - media_player.owntone_output_bathroom
      - service: media_player.volume_set
        data:
          volume_level: 0.5
        target:
          entity_id: media_player.owntone_output_bathroom
      alias: Turn on Bathroom HomePod
    - if:
      - condition: state
        entity_id: switch.fronttv
        state: 'off'
      then:
      - service: media_player.turn_on
        data: {}
        target:
          entity_id: media_player.owntone_output_front
      - service: media_player.volume_set
        data:
          volume_level: 0.85
        target:
          entity_id:
          - media_player.owntone_output_front
      - service: media_player.volume_set
        data:
          volume_level: 0.25
        target:
          entity_id: media_player.gym_tv
      alias: Turn on Front TV
    - if:
      - condition: state
        entity_id: media_player.owntone_output_living_room
        state: 'off'
      then:
      - service: media_player.turn_on
        data: {}
        target:
          entity_id:
          - media_player.owntone_output_living_room
      - service: media_player.volume_set
        data:
          volume_level: 0.45
        target:
          entity_id: media_player.owntone_output_living_room
      alias: Turn on Kitchen HomePod
  mode: single
  icon: mdi:music
lofi:
  alias: LoFi
  sequence:
  - service: media_player.select_source
    data:
      source: Lofi hip hop - beats to relax/study to (playlist)
    target:
      entity_id:
      - media_player.owntone_server
  - service: media_player.shuffle_set
    data:
      shuffle: true
    target:
      entity_id: media_player.owntone_server
  - service: media_player.media_next_track
    data: {}
    target:
      entity_id: media_player.owntone_server
  - parallel:
    - service: media_player.media_play
      data: {}
      target:
        entity_id: media_player.owntone_server
    - if:
      - condition: state
        entity_id: media_player.owntone_output_desk
        state: 'off'
      then:
      - service: media_player.turn_on
        data: {}
        target:
          entity_id: media_player.owntone_output_desk
      - service: media_player.volume_set
        data:
          volume_level: 0.15
        target:
          entity_id: media_player.owntone_output_desk
      - event: event_change_nanoleaf
        event_data: {}
      alias: Turn on Desk Speakers
    - if:
      - condition: state
        entity_id: binary_sensor.bed_occupancy
        state: 'off'
      then:
      - parallel:
        - if:
          - condition: state
            entity_id: switch.lrtv
            state: 'off'
          then:
          - service: switch.turn_on
            data: {}
            target:
              entity_id: switch.lrtv
          - delay:
              hours: 0
              minutes: 0
              seconds: 20
              milliseconds: 0
          - service: media_player.volume_set
            data:
              volume_level: 0.5
            target:
              entity_id: media_player.living_room_denon
          - service: media_player.turn_on
            data: {}
            target:
              entity_id: media_player.owntone_output_tv
          - service: media_player.volume_set
            data:
              volume_level: 0.35
            target:
              entity_id: media_player.owntone_output_tv
          alias: Turn on Living Room TV
        - if:
          - condition: state
            entity_id: media_player.owntone_output_bathroom
            state: 'off'
          then:
          - service: media_player.turn_on
            data: {}
            target:
              entity_id:
              - media_player.owntone_output_bathroom
          - service: media_player.volume_set
            data:
              volume_level: 0.4
            target:
              entity_id: media_player.owntone_output_bathroom
          alias: Turn on Bathroom HomePod
        - if:
          - condition: state
            entity_id: switch.fronttv
            state: 'off'
          then:
          - service: media_player.turn_on
            data: {}
            target:
              entity_id: media_player.owntone_output_front
          - service: media_player.volume_set
            data:
              volume_level: 0.5
            target:
              entity_id:
              - media_player.owntone_output_front
          - service: media_player.volume_set
            data:
              volume_level: 0.25
            target:
              entity_id: media_player.gym_tv
          alias: Turn on Front TV
        - if:
          - condition: state
            entity_id: media_player.owntone_output_living_room
            state: 'off'
          then:
          - service: media_player.turn_on
            data: {}
            target:
              entity_id:
              - media_player.owntone_output_living_room
          - service: media_player.volume_set
            data:
              volume_level: 0.45
            target:
              entity_id: media_player.owntone_output_living_room
          alias: Turn on Kitchen HomePod
  mode: single
  icon: mdi:meditation
