- id: '1546210609741'
  alias: Morning Automation
  trigger:
  - at: '10:00:00'
    platform: time
    id: thursday/friday wakeup time
  - platform: time
    at: '11:30:00'
    id: tuesday wakeup time
  condition:
  - condition: time
    weekday:
    - tue
    - thu
  action:
  - choose:
    - conditions:
      - condition: trigger
        id: thursday/friday wakeup time
      - condition: time
        weekday:
        - thu
        - fri
      sequence:
      - service: homeassistant.turn_on
        target:
          entity_id:
          - script.white
          - input_boolean.bedmotion
      - service: cover.set_cover_position
        target:
          entity_id: cover.bedroom_blinds
        data:
          position: 100
      - delay:
          hours: 0
          minutes: 5
          seconds: 0
          milliseconds: 0
      - service: input_boolean.turn_off
        target:
          entity_id: input_boolean.bedmotion
    - conditions:
      - condition: trigger
        id: tuesday wakeup time
      - condition: time
        weekday:
        - tue
      sequence:
      - service: homeassistant.turn_on
        target:
          entity_id:
          - script.white
          - input_boolean.bedmotion
      - service: cover.set_cover_position
        target:
          entity_id: cover.bedroom_blinds
        data:
          position: 100
      - delay:
          hours: 0
          minutes: 5
          seconds: 0
          milliseconds: 0
      - service: input_boolean.turn_off
        target:
          entity_id: input_boolean.bedmotion
    default: []
  mode: single
- id: 43a25b65afed4a4680f5ec81172f11e8
  alias: Startup Actions
  description: Set Theme, Ensure Location Input Select is Updated
  trigger:
  - event: start
    platform: homeassistant
  action:
  - data:
      name: ios-dark-mode
    service: frontend.set_theme
  - service: browser_mod.window_reload
  - condition: zone
    entity_id: person.anthony
    zone: zone.home
  - service: input_select.select_option
    target:
      entity_id: input_select.anthony
    data:
      option: Home
  initial_state: true
  mode: single
- id: '1617634628204'
  alias: Automating
  description: Reset automating bool used for light switch
  trigger:
  - platform: state
    entity_id: input_boolean.automating
    to: 'on'
  condition: []
  action:
  - wait_template: ''
    timeout: '1.8'
  - service: input_boolean.turn_off
    target:
      entity_id: input_boolean.automating
  mode: single
- id: '1620642299524'
  alias: Motion Bypass
  description: Turn lights on if bed motion sensing bypass is enabled
  trigger:
  - platform: state
    entity_id: input_boolean.bedmotion
    to: 'on'
  condition:
  - condition: state
    entity_id: light.fan_lights
    state: 'off'
  action:
  - service: script.white
  mode: single
- id: '1620642346363'
  alias: Ensure Stuff Off
  description: Turn off room at 7 AM
  trigger:
  - platform: time
    at: 07:00:00
  condition: []
  action:
  - service: script.stuff_off
  - service: input_boolean.turn_off
    target:
      entity_id: input_boolean.awake
  mode: single
- id: '1620642580296'
  alias: Bed Motion
  description: If motion detected in bed under certain circumstances, turn off overhead
    lights.
  trigger:
  - platform: state
    entity_id: binary_sensor.wyzemotion
    to: 'on'
  condition:
  - condition: state
    entity_id: light.fan_lights
    state: 'on'
  - condition: state
    entity_id: binary_sensor.bedroom_door
    state: 'off'
  - condition: state
    entity_id: input_boolean.bedmotion
    state: 'off'
  action:
  - service: script.fan_off
  mode: single
- id: '1620710706685'
  alias: Color Loop
  description: Adjust color loop state
  trigger:
  - platform: time_pattern
    seconds: /3
  condition: []
  action:
  - choose:
    - conditions:
      - condition: state
        entity_id: input_number.colorloopstate
        state: '4.0'
      sequence:
      - service: input_number.set_value
        target:
          entity_id: input_number.colorloopstate
        data:
          value: 0
    default:
    - service: input_number.increment
      target:
        entity_id: input_number.colorloopstate
  mode: single
- id: '1621577255605'
  alias: Left Home
  description: Turns bedroom off when leaving home, and ensures bedroom stays off
  trigger:
  - platform: state
    entity_id: light.desk_lights
    from: 'off'
    to: 'on'
    for: 00:05:00
  - platform: state
    entity_id: light.fan_lights
    from: 'off'
    to: 'on'
    for: 00:05:00
  - platform: state
    entity_id: switch.windows
    for: 00:01:00
    from: 'off'
    to: 'on'
  - platform: zone
    entity_id: person.anthony
    zone: zone.home
    event: leave
  condition:
  - condition: template
    value_template: '{{states(''person.anthony'') != ''home''}}'
  action:
  - service: script.stuff_off
  - service: cover.set_cover_position
    target:
      entity_id: cover.bedroom_blinds
    data:
      position: 0
  - condition: state
    entity_id: switch.ac
    state: 'on'
  - service: switch.turn_off
    target:
      entity_id: switch.ac
  - service: cover.close_cover
    target:
      entity_id: cover.bedroom_blinds
  mode: single
- id: '1621816232606'
  alias: Taylor Wyze Power
  description: Control power to Apartment Wyze cameras based on home presence
  trigger:
  - platform: time_pattern
    minutes: /1
  - platform: zone
    entity_id: person.taylor
    zone: zone.taylor_s_home
    event: enter
  - platform: zone
    entity_id: person.taylor
    zone: zone.taylor_s_home
    event: leave
  - platform: homeassistant
    event: start
  condition: []
  action:
  - choose:
    - conditions:
      - condition: state
        entity_id: person.taylor
        state: Taylor's Home
      sequence:
      - service: homeassistant.turn_off
        target:
          entity_id: group.apartment
    default:
    - condition: state
      entity_id: group.apartment
      state: 'off'
    - service: homeassistant.turn_on
      target:
        entity_id: group.apartment
  mode: single
- id: '1627401846713'
  alias: Arrived Home
  description: ''
  trigger:
  - platform: state
    entity_id: binary_sensor.bedroom_door
    to: 'on'
    from: 'off'
  condition:
  - condition: state
    entity_id: input_select.anthony
    state: Just Arrived
  action:
  - service: script.turn_on
    target:
      entity_id: script.stuff_on
  - service: input_select.select_option
    target:
      entity_id: input_select.anthony
    data:
      option: Home
  mode: single
- id: '1627443167507'
  alias: Bedroom Alerts
  description: ''
  trigger:
  - platform: state
    entity_id: binary_sensor.bedroom_door
    to: 'on'
    id: Motion
  - platform: state
    entity_id: binary_sensor.closet
    from: 'off'
    to: 'on'
    id: closetopen
  - platform: state
    entity_id: binary_sensor.closet
    from: 'on'
    to: 'off'
    id: closetclosed
  condition:
  - condition: template
    value_template: '{{states(''person.anthony'') != ''home''}}'
  action:
  - choose:
    - conditions:
      - condition: trigger
        id: closetopen
      sequence:
      - service: notify.mobile_app_iphone
        data:
          message: Bedroom closet has been opened
          title: Motion detected in bedroom
    - conditions:
      - condition: trigger
        id: Motion
      sequence:
      - service: notify.mobile_app_iphone
        data:
          message: Bedroom door has been opened
          title: Motion detected in bedroom
    - conditions:
      - condition: trigger
        id: closetclosed
      sequence:
      - service: notify.mobile_app_iphone
        data:
          message: Bedroom closet has been closed
          title: Motion detected in bedroom
    default: []
  mode: single
- id: '1627778209718'
  alias: Presence Detection
  description: ''
  trigger:
  - platform: state
    entity_id: input_select.anthony
    to: Just Arrived
    for: 00:20:00
    id: Home
  - platform: state
    entity_id: input_select.anthony
    id: Away
    to: Just Left
    for: 00:10:00
  - platform: zone
    entity_id: person.anthony
    zone: zone.home
    event: enter
    id: Just Arrived
  - platform: zone
    entity_id: person.anthony
    zone: zone.home
    event: leave
    id: Just Left
  condition: []
  action:
  - choose:
    - conditions:
      - condition: trigger
        id: Home
      sequence:
      - service: input_select.select_option
        target:
          entity_id: input_select.anthony
        data:
          option: Home
    - conditions:
      - condition: trigger
        id: Away
      sequence:
      - service: input_select.select_option
        target:
          entity_id: input_select.anthony
        data:
          option: Away
    - conditions:
      - condition: trigger
        id: Just Arrived
      sequence:
      - service: input_select.select_option
        target:
          entity_id: input_select.anthony
        data:
          option: Just Arrived
    - conditions:
      - condition: trigger
        id: Just Left
      sequence:
      - service: input_select.select_option
        target:
          entity_id: input_select.anthony
        data:
          option: Just Left
    default: []
  mode: single
- id: '1627779396737'
  alias: Door Opened
  description: ''
  trigger:
  - platform: state
    entity_id: binary_sensor.bedroom_door
    to: 'on'
  condition:
  - condition: state
    entity_id: input_select.anthony
    state: Home
  - condition: state
    entity_id: light.fan_lights
    state: 'off'
  action:
  - choose:
    - conditions:
      - condition: state
        entity_id: light.desk_lights
        state: 'on'
      - condition: time
        after: 07:00:00
        before: 01:00:00
      sequence:
      - service: script.color_loop
    default: []
  mode: single
- id: '1627966300438'
  alias: Close Blinds When Dark
  description: ''
  trigger:
  - platform: sun
    event: sunset
    offset: +00:30:00
  condition:
  - condition: state
    entity_id: cover.bedroom_blinds
    state: open
  action:
  - service: cover.set_cover_position
    target:
      entity_id: cover.bedroom_blinds
    data:
      position: 0
  mode: single
- id: '1629524719390'
  alias: Closet Lights
  description: ''
  trigger:
  - platform: homeassistant
    event: start
    id: startup
  - platform: state
    entity_id: binary_sensor.closet
    to: 'on'
    id: 'on'
  - platform: state
    entity_id: binary_sensor.closet
    id: 'off'
    to: 'off'
  - platform: state
    entity_id: light.closet_lights
    id: lighton
    from: 'off'
    to: 'on'
  - platform: state
    entity_id: light.closet_lights
    id: lightoff
    to: 'off'
  condition: []
  action:
  - choose:
    - conditions:
      - condition: trigger
        id: 'on'
      - condition: state
        entity_id: light.desk_lights
        state: 'on'
      sequence:
      - service: light.turn_on
        target:
          entity_id: light.closet_lights
        data:
          effect: Color Loop
          brightness_pct: 2
      - service: light.turn_on
        target:
          entity_id: light.closet_lights
        data:
          brightness_pct: 100
    - conditions:
      - condition: trigger
        id: 'on'
      - condition: state
        entity_id: light.desk_lights
        state: 'off'
      sequence:
      - service: light.turn_on
        target:
          entity_id: light.closet_lights
        data:
          rgb_color:
          - 255
          - 255
          - 255
          effect: None
    - conditions:
      - condition: trigger
        id: 'off'
      sequence:
      - service: light.turn_off
        target:
          entity_id: light.closet_lights
    - conditions:
      - condition: trigger
        id: startup
      sequence:
      - choose:
        - conditions:
          - condition: state
            entity_id: binary_sensor.closet
            state: 'on'
          - condition: state
            entity_id: light.desk_lights
            state: 'on'
          sequence:
          - service: light.turn_on
            target:
              entity_id: light.closet_lights
            data:
              effect: Color Loop
              brightness_pct: 2
          - service: light.turn_on
            target:
              entity_id: light.closet_lights
            data:
              brightness_pct: 100
        - conditions:
          - condition: state
            entity_id: binary_sensor.closet
            state: 'on'
          - condition: state
            entity_id: light.desk_lights
            state: 'off'
          sequence:
          - service: light.turn_on
            target:
              entity_id: light.closet_lights
            data:
              rgb_color:
              - 255
              - 255
              - 255
              effect: None
        - conditions:
          - condition: state
            entity_id: binary_sensor.closet
            state: 'off'
          sequence:
          - service: light.turn_off
            target:
              entity_id: light.closet_lights
        default: []
    - conditions:
      - condition: trigger
        id: lighton
      - condition: state
        entity_id: binary_sensor.closet
        state: 'off'
      sequence:
      - service: light.turn_off
        target:
          entity_id: light.closet_lights
    default: []
  mode: single
- id: '1629947581379'
  alias: Detect Wyze Sensor Issue
  description: ''
  trigger:
  - platform: state
    entity_id: binary_sensor.wyzemotion
    to: 'on'
    for:
      hours: 0
      minutes: 10
      seconds: 0
      milliseconds: 0
  condition: []
  action:
  - service: notify.mobile_app_iphone
    data:
      message: Wyze sensors have stopped responding
      title: Issue Detected
  mode: single
- id: '1630720815230'
  alias: Living Room TV Remote
  description: Make Control Center Remote work for Living Room TV
  trigger:
  - platform: event
    event_type: homekit_tv_remote_key_pressed
    id: up
    event_data:
      key_name: arrow_up
  - platform: event
    event_type: homekit_tv_remote_key_pressed
    id: down
    event_data:
      key_name: arrow_down
  - platform: event
    event_type: homekit_tv_remote_key_pressed
    id: left
    event_data:
      key_name: arrow_left
  - platform: event
    event_type: homekit_tv_remote_key_pressed
    id: right
    event_data:
      key_name: arrow_right
  - platform: event
    event_type: homekit_tv_remote_key_pressed
    id: select
    event_data:
      key_name: select
  - platform: event
    event_type: homekit_tv_remote_key_pressed
    id: information
    event_data:
      key_name: information
  - platform: event
    event_type: homekit_tv_remote_key_pressed
    id: back
    event_data:
      key_name: back
  - platform: state
    entity_id: input_select.living_room_tv_sources
    id: Hulu
    to: Hulu
  - platform: state
    entity_id: input_select.living_room_tv_sources
    id: Home
    to: Home
  - platform: state
    entity_id: input_select.living_room_tv_sources
    id: Netflix
    to: Netflix
  - platform: state
    entity_id: input_select.living_room_tv_sources
    id: primevideo
    to: '"Prime Video"'
  - platform: state
    entity_id: input_select.living_room_tv_sources
    id: Disney+
    to: Disney+
  - platform: state
    entity_id: input_select.living_room_tv_sources
    id: Stealth
    to: Stealth
  - platform: state
    entity_id: input_select.living_room_tv_sources
    id: youtube
    to: YouTube
  condition: []
  action:
  - choose:
    - conditions:
      - condition: trigger
        id: up
      sequence:
      - service: androidtv.adb_command
        data:
          entity_id: media_player.living_room_fire_tv_stick
          command: sendevent /dev/input/event4 4 4 458834 && sendevent /dev/input/event4
            1 103 1 && sendevent /dev/input/event4 0 0 0 && sendevent /dev/input/event4
            4 4 458834 && sendevent /dev/input/event4 1 103 0 && sendevent /dev/input/event4
            0 0 0
    - conditions:
      - condition: trigger
        id: down
      sequence:
      - service: androidtv.adb_command
        data:
          command: sendevent /dev/input/event4 4 4 458833 && sendevent /dev/input/event4
            1 108 1 && sendevent /dev/input/event4 0 0 0 && sendevent /dev/input/event4
            4 4 458833 && sendevent /dev/input/event4 1 108 0 && sendevent /dev/input/event4
            0 0 0
          entity_id: media_player.living_room_fire_tv_stick
    - conditions:
      - condition: trigger
        id: left
      sequence:
      - service: androidtv.adb_command
        data:
          entity_id: media_player.living_room_fire_tv_stick
          command: sendevent /dev/input/event4 4 4 458832 && sendevent /dev/input/event4
            1 105 1 && sendevent /dev/input/event4 0 0 0 && sendevent /dev/input/event4
            4 4 458832 && sendevent /dev/input/event4 1 105 0 && sendevent /dev/input/event4
            0 0 0
    - conditions:
      - condition: trigger
        id: right
      sequence:
      - service: androidtv.adb_command
        data:
          entity_id: media_player.living_room_fire_tv_stick
          command: sendevent /dev/input/event4 4 4 458831 && sendevent /dev/input/event4
            1 106 1 && sendevent /dev/input/event4 0 0 0 && sendevent /dev/input/event4
            4 4 458831 && sendevent /dev/input/event4 1 106 0 && sendevent /dev/input/event4
            0 0 0
    - conditions:
      - condition: trigger
        id: select
      sequence:
      - service: androidtv.adb_command
        data:
          command: sendevent /dev/input/event4 4 4 458840 && sendevent /dev/input/event4
            1 96 1 && sendevent /dev/input/event4 0 0 0 && sendevent /dev/input/event4
            4 4 458840 && sendevent /dev/input/event4 1 96 0 && sendevent /dev/input/event4
            0 0 0
          entity_id: media_player.living_room_fire_tv_stick
    - conditions:
      - condition: trigger
        id: information
      sequence:
      - service: androidtv.adb_command
        data:
          entity_id: media_player.living_room_fire_tv_stick
          command: sendevent /dev/input/event4 4 4 786496 && sendevent /dev/input/event4
            1 139 1 && sendevent /dev/input/event4 0 0 0 && sendevent /dev/input/event4
            4 4 786496 && sendevent /dev/input/event4 1 139 0 && sendevent /dev/input/event4
            0 0 0
    - conditions:
      - condition: trigger
        id: back
      sequence:
      - service: androidtv.adb_command
        data:
          entity_id: media_player.living_room_fire_tv_stick
          command: sendevent /dev/input/event4 4 4 458993 && sendevent /dev/input/event4
            1 158 1 && sendevent /dev/input/event4 0 0 0 && sendevent /dev/input/event4
            4 4 458993 && sendevent /dev/input/event4 1 158 0 && sendevent /dev/input/event4
            0 0 0
    - conditions:
      - condition: trigger
        id: Hulu
      sequence:
      - service: media_player.select_source
        target:
          entity_id: media_player.living_room_fire_tv_stick
        data:
          source: com.hulu.plus
    - conditions:
      - condition: trigger
        id: Home
      sequence:
      - service: media_player.select_source
        target:
          entity_id: media_player.living_room_fire_tv_stick
        data:
          source: com.wolf.firelauncher
    - conditions:
      - condition: trigger
        id: Netflix
      sequence:
      - service: media_player.select_source
        target:
          entity_id: media_player.living_room_fire_tv_stick
        data:
          source: com.netflix.ninja
    - conditions:
      - condition: trigger
        id: primevideo
      sequence:
      - service: media_player.select_source
        target:
          entity_id: media_player.living_room_fire_tv_stick
        data:
          source: com.amazon.avod
    - conditions:
      - condition: trigger
        id: Disney+
      sequence:
      - service: media_player.select_source
        target:
          entity_id: media_player.living_room_fire_tv_stick
        data:
          source: com.disney.disneyplus
    - conditions:
      - condition: trigger
        id: Stealth
      sequence:
      - service: media_player.select_source
        target:
          entity_id: media_player.living_room_fire_tv_stick
        data:
          source: com.stealth.stealthiptvbox
    - conditions:
      - condition: trigger
        id: youtube
      sequence:
      - service: media_player.select_source
        target:
          entity_id: media_player.living_room_fire_tv_stick
        data:
          source: com.google.android.youtube.tv
    default: []
  mode: parallel
  max: 50
- id: '1630813491059'
  alias: Fire Stick Notifications
  description: ''
  trigger:
  - platform: state
    entity_id: cover.garage_door
    id: garage
    to: opening
    for:
      hours: 0
      minutes: 0
      seconds: 8
      milliseconds: 0
  condition:
  - condition: state
    entity_id: switch.living_room_tv
    state: 'on'
  action:
  - service: camera.snapshot
    target:
      entity_id: camera.garage
    data:
      filename: /config/www/tmp/snapshot_garage.jpg
  - service: notify.fire_tv
    data:
      message: ​
      title: Garage Door Opened
      data:
        file:
          path: /config/www/tmp/snapshot_garage.jpg
  mode: single
- id: '1631390082028'
  alias: Garage Notifications
  description: ''
  trigger:
  - platform: state
    entity_id: cover.garage_door
    to: open
    from: closed
    for:
      hours: 0
      minutes: 15
      seconds: 0
      milliseconds: 0
  condition:
  - condition: zone
    entity_id: person.anthony
    zone: zone.home
  action:
  - service: notify.mobile_app_iphone
    data:
      message: Garage left open for 15 minutes
      title: Garage left open
  mode: single
- id: '1635104348023'
  alias: Front Porch Camera Notification
  description: ''
  trigger:
  - platform: state
    entity_id: binary_sensor.front_porch_motion
    to: 'on'
    for:
      hours: 0
      minutes: 0
      seconds: 1
      milliseconds: 0
    from: 'off'
  condition: []
  action:
  - service: notify.mobile_app_iphone
    data:
      message: Person detected at Front Porch
      data:
        image: /local/FP.jpg
  mode: single
- id: '1635205275088'
  alias: Car Porch Camera Notification
  description: ''
  trigger:
  - platform: state
    entity_id: binary_sensor.car_motion
    to: 'on'
    for:
      hours: 0
      minutes: 0
      seconds: 1
      milliseconds: 0
    from: 'off'
  condition: []
  action:
  - service: notify.mobile_app_iphone
    data:
      message: Person detected at Car
      data:
        image: /local/car.jpg
  mode: single
- id: '1638935019248'
  alias: Christmas Lights
  description: ''
  trigger:
  - platform: sun
    event: sunset
    offset: '0'
    id: set
  - platform: time
    at: '23:00:00'
    id: 'off'
  condition: []
  action:
  - choose:
    - conditions:
      - condition: trigger
        id: set
      sequence:
      - service: switch.turn_on
        target:
          entity_id: switch.christmas_lights
    - conditions:
      - condition: trigger
        id: 'off'
      sequence:
      - service: switch.turn_off
        target:
          entity_id: switch.christmas_lights
    default: []
  mode: single
